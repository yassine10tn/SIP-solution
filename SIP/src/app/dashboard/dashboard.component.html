<div class="mb-10">
  <!--breadcrumb-->
  <div class="mb-4 bg-white p-3 mt-4 rounded-lg border border-gray-100">
    <div class="flex justify-between items-center">
      <p-breadcrumb [model]="items" class="w-full">
        <ng-template pTemplate="item" let-item let-index="index">
          <ng-container *ngIf="item.route; else elseBlock">
            <a [routerLink]="item.route"
              class="flex items-center gap-3 hover:text-blue-600 transition-colors duration-200">
              <span *ngIf="item.icon && index === 0" [class]="item.icon + ' text-blue-500 text-sm mr-1'"></span>
              <span class="font-medium text-sm"
                [ngClass]="{'text-blue-600': index === items.length - 1, 'ml-1': index === 0}">
                {{ item.label }}
              </span>
              <span *ngIf="item.icon && index !== 0" [class]="item.icon + ' text-blue-500 text-sm'"></span>
            </a>
          </ng-container>
          <ng-template #elseBlock>
            <span class="text-gray-500 flex items-center gap-3 text-sm">
              <span *ngIf="item.icon && index === 0" [class]="item.icon + ' text-gray-400 mr-1'"></span>
              {{ item.label }}
              <span *ngIf="item.icon && index !== 0" [class]="item.icon + ' text-gray-400'"></span>
            </span>
          </ng-template>
        </ng-template>
        <ng-template pTemplate="separator">
          <i class="pi pi-chevron-right text-gray-400 text-xs mx-1"></i>
        </ng-template>
      </p-breadcrumb>
      <button (click)="printDashboard()"
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2">
        <i class="pi pi-print"></i> Imprimer
      </button>
    </div>
  </div>

  <!-- Cards Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- User Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <!-- Animated background effect -->
      <div
        class="absolute inset-0 bg-gradient-to-br from-blue-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-blue-100/80 p-2 rounded-lg group-hover:bg-blue-200/50 transition-all duration-300 group-hover:rotate-12">
              <i class="pi pi-user text-blue-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Utilisateurs</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-blue-600">
            {{ usersCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse"></i>
            <span>3 nouveaux cette semaine</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-blue-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-blue-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-user text-blue-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-blue-100 shadow-xs text-blue-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce" style="animation-duration: 1.5s"></i>
              <span>12%</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-blue-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-blue-500 rounded-full transition-all duration-1000 delay-300" style="width: 65%">
            </div>
          </div>
        </div>
      </div>
      <!-- Animated border effect -->
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-blue-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Company Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-green-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-green-100/80 p-2 rounded-lg group-hover:bg-green-200/50 transition-all duration-300 group-hover:rotate-12">
              <i
                class="pi pi-building text-green-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Sociétés</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-green-600">
            {{ societeCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 0.2s"></i>
            <span>5 en attente</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-green-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-green-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-building text-green-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-green-100 shadow-xs text-green-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.1s"></i>
              <span>10</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-green-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-green-500 rounded-full transition-all duration-1000 delay-300" style="width: 80%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-green-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Auditors Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-purple-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-purple-100/80 p-2 rounded-lg group-hover:bg-purple-200/50 transition-all duration-300 group-hover:rotate-12">
              <i
                class="pi pi-id-card text-purple-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Commissaires</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-purple-600">
            {{ cacCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 0.4s"></i>
            <span>2 missions</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-purple-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-purple-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-id-card text-purple-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-purple-100 shadow-xs text-purple-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-check-circle text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.2s"></i>
              <span>Actifs</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-purple-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-purple-500 rounded-full transition-all duration-1000 delay-300" style="width: 75%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-purple-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>
    <!-- Contacts Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-amber-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-amber-100/80 p-2 rounded-lg group-hover:bg-amber-200/50 transition-all duration-300 group-hover:rotate-12">
              <i class="pi pi-users text-amber-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Contacts</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-amber-600">
            {{ contactsCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 0.3s"></i>
            <span>12 nouveaux ce mois</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-amber-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-amber-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-users text-amber-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-amber-100 shadow-xs text-amber-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.15s"></i>
              <span>15%</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-amber-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-amber-500 rounded-full transition-all duration-1000 delay-300" style="width: 85%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-amber-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Meetings Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-orange-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-orange-100/80 p-2 rounded-lg group-hover:bg-orange-200/50 transition-all duration-300 group-hover:rotate-12">
              <i
                class="pi pi-calendar text-orange-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Réunions</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-orange-600">
            {{ reunionCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 0.6s"></i>
            <span>Prochaine: 15/05</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-orange-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-orange-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-calendar text-orange-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-orange-100 shadow-xs text-orange-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.3s"></i>
              <span>1</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-orange-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-orange-500 rounded-full transition-all duration-1000 delay-300" style="width: 40%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-orange-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Purchase Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-red-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-red-100/80 p-2 rounded-lg group-hover:bg-red-200/50 transition-all duration-300 group-hover:rotate-12">
              <i
                class="pi pi-shopping-cart text-red-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Total
              d'achats</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-red-600">
            {{ achatsCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 0.8s"></i>
            <span>Objectif: 45</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-red-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-red-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-shopping-cart text-red-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-red-100 shadow-xs text-red-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.4s"></i>
              <span>5%</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-red-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-red-500 rounded-full transition-all duration-1000 delay-300" style="width: 65%"></div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-red-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Sales Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-indigo-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-indigo-100/80 p-2 rounded-lg group-hover:bg-indigo-200/50 transition-all duration-300 group-hover:rotate-12">
              <i
                class="pi pi-chart-line text-indigo-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Total
              ventes</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-indigo-600">
            {{ ventesCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 1s"></i>
            <span>Ce mois: 4</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-indigo-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-indigo-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-chart-line text-indigo-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-indigo-100 shadow-xs text-indigo-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.5s"></i>
              <span>8.5%</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-indigo-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-indigo-500 rounded-full transition-all duration-1000 delay-300" style="width: 70%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-indigo-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Subscriptions Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-teal-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-teal-100/80 p-2 rounded-lg group-hover:bg-teal-200/50 transition-all duration-300 group-hover:rotate-12">
              <i class="pi pi-book text-teal-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Souscriptions</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-teal-600">
            {{ souscriptionsCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 1.2s"></i>
            <span>Nouvelles ce mois: 3</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-teal-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-teal-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-book text-teal-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-teal-100 shadow-xs text-teal-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.6s"></i>
              <span>3</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-teal-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-teal-500 rounded-full transition-all duration-1000 delay-300" style="width: 60%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-teal-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>

    <!-- Releases Card -->
    <div
      class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] border border-gray-100 overflow-hidden group hover:-translate-y-1.5 relative">
      <div
        class="absolute inset-0 bg-gradient-to-br from-pink-50/30 to-white/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
      </div>

      <div class="p-5 flex justify-between items-start relative z-10">
        <div>
          <div class="flex items-center gap-3 mb-2">
            <span
              class="bg-pink-100/80 p-2 rounded-lg group-hover:bg-pink-200/50 transition-all duration-300 group-hover:rotate-12">
              <i
                class="pi pi-check-circle text-pink-600 text-sm transition-transform duration-300 group-hover:scale-110"></i>
            </span>
            <span
              class="text-xs font-semibold text-gray-500 uppercase tracking-wider transition-colors duration-300 group-hover:text-gray-600">Libérations</span>
          </div>
          <p
            class="text-2xl font-bold text-gray-800 mb-1 transition-all duration-500 group-hover:text-3xl group-hover:text-pink-600">
            {{ liberationsCount }}</p>
          <div class="flex items-center text-xs text-gray-500 transition-colors duration-300 group-hover:text-gray-600">
            <i class="pi pi-info-circle mr-1 text-xs animate-pulse" style="animation-delay: 1.4s"></i>
            <span>En attente: 23</span>
          </div>
        </div>
        <div class="flex flex-col items-end">
          <div class="relative">
            <div
              class="bg-pink-50/70 p-2.5 rounded-lg mb-2 group-hover:bg-pink-100/50 transition-all duration-500 group-hover:scale-110">
              <i class="pi pi-check-circle text-pink-600 text-xl"></i>
            </div>
            <span
              class="absolute -top-2 -right-2 bg-white border border-pink-100 shadow-xs text-pink-600 text-xs px-2 py-0.5 rounded-full flex items-center transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-sm">
              <i class="pi pi-arrow-up text-xs mr-0.5 animate-bounce"
                style="animation-duration: 1.5s; animation-delay: 0.7s"></i>
              <span>7.2%</span>
            </span>
          </div>
          <div class="h-2 w-16 bg-pink-100 rounded-full overflow-hidden mt-2">
            <div class="h-full bg-pink-500 rounded-full transition-all duration-1000 delay-300" style="width: 50%">
            </div>
          </div>
        </div>
      </div>
      <div
        class="absolute bottom-0 left-0 right-0 h-1 bg-pink-100 origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-700">
      </div>
    </div>
  </div>

  <!-- courbe + carte -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-10">
    <!-- Graphique de courbe -->
    <div class="lg:col-span-2 bg-white rounded-lg shadow-sm p-4 border border-gray-100 curve-section">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-gray-800">Taux de progression des souscriptions STB</h3>
        <div class="flex items-center gap-4">
          <div class="flex items-center gap-2 text-sm text-gray-500">
            <span class="flex items-center">
              <span class="w-3 h-3 bg-blue-500 rounded-full mr-1"></span> Objectif de souscriptions
            </span>
            <span class="flex items-center">
              <span class="w-3 h-3 bg-green-500 rounded-full mr-1"></span> Souscriptions réelles
            </span>
          </div>
          <button (click)="printCurveSection()"
            class="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 text-sm">
            <i class="pi pi-print"></i> Imprimer
          </button>
        </div>
      </div>
      <div class="chart-container" style="position: relative; height: 600px;">
        <canvas id="subscriptionRateChart"></canvas>
      </div>
    </div>

    <!-- Graphique des gouvernorats simplifié -->
    <div
      class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-all duration-300 map-section">
      <div class="flex justify-between items-start mb-4">
        <div>
          <h3 class="text-xl font-semibold text-gray-800 mb-1">Investissements par gouvernorat</h3>
          <p class="text-sm text-gray-500">Répartition géographique des investissements</p>
        </div>
        <div class="flex gap-2 items-center">
          <button (click)="sortBy('name')"
            class="text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full transition-all flex items-center">
            <i class="pi pi-sort-alpha-down mr-1"></i> <span>Nom</span>
          </button>
          <button (click)="sortBy('value')"
            class="text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded-full transition-all flex items-center">
            <i class="pi pi-sort-numeric-down mr-1"></i> <span>Valeur</span>
          </button>
          <button (click)="printMapSection()"
            class="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 text-sm">
            <i class="pi pi-print"></i> Imprimer
          </button>
        </div>
      </div>

      <div class="relative">
        <!-- Barre de recherche -->
        <div class="relative mb-4">
          <i class="pi pi-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          <input type="text" [(ngModel)]="governorateSearch" (input)="filterGovernorates()"
            placeholder="Rechercher un gouvernorat..."
            class="w-full pl-10 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all">
        </div>

        <div class="overflow-auto max-h-[400px] pr-2 custom-scrollbar">
          <table class="w-full text-sm">
            <thead class="sticky top-0 bg-white z-10">
              <tr class="text-left text-gray-500 border-b">
                <th class="pb-3 pl-2">Gouvernorat</th>
                <th class="pb-3 text-right pr-4">Montant</th>
                <th class="pb-3 w-3/5">Répartition</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let gov of filteredGovernorates"
                class="border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200">
                <td class="py-3 pl-2">
                  <div class="flex items-center">
                    <span class="w-3 h-3 rounded-full mr-3 flex-shrink-0" [style.backgroundColor]="gov.color"></span>
                    <span class="font-medium">{{ gov.name }}</span>
                  </div>
                </td>
                <td class="text-right pr-4 font-medium">
                  {{ gov.value }}M
                </td>
                <td>
                  <div class="flex items-center">
                    <div class="w-full bg-gray-100 rounded-full h-2.5 mr-3">
                      <div class="h-2.5 rounded-full transition-all duration-500" [style.backgroundColor]="gov.color"
                        [style.width]="(gov.value / maxGovernorateValue) * 100 + '%'">
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Résumé simplifié -->
        <div class="mt-4 pt-4 border-t border-gray-100 text-sm text-gray-500">
          <span *ngIf="governorateSearch">
            {{ filteredGovernorates.length }} résultat(s) trouvé(s)
          </span>
          <span *ngIf="!governorateSearch">
            {{ governorates.length }} gouvernorats
          </span>
        </div>
      </div>
    </div>
  </div>

    <!--Secteur Pie Chart +  Shareholder Statistics-->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6">
    <!-- Secteur Pie Chart -->
    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100 sector-pie-section">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-semibold text-gray-800">Répartition par secteur</h3>
        <button (click)="printSectorPieChartSection()"
          class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 text-sm">
          <i class="pi pi-print"></i> Imprimer
        </button>
      </div>
      <div class="chart-container" style="position: relative; height: 300px;">
        <canvas id="sectorPieChart"></canvas>
      </div>
    </div>
  
  <!-- Shareholder Statistics -->
  <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-8 border border-gray-100 shareholder-stats-section animate-fade-in">
    <div class="flex justify-between items-center mb-8">
      <h3 class="text-2xl font-semibold text-gray-800">Statistiques des actionnaires</h3>
      <button (click)="printShareholderStatsSection()"
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 text-sm">
        <i class="pi pi-print"></i> Imprimer
      </button>
    </div>
    <div class="flex flex-wrap justify-around gap-12">
      <!-- Total Shareholders -->
      <div class="relative flex flex-col items-center group">
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg p-6 w-64">
          <div class="relative w-48 h-48 mx-auto transition-transform duration-300 group-hover:rotate-3">
            <svg class="w-full h-full" viewBox="0 0 36 36">
              <path class="circle-bg" d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none" stroke="#E5E7EB" stroke-width="2"/>
              <path class="circle circle-animate group-hover:brightness-110" d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none" stroke="url(#totalGradient)" stroke-width="2" stroke-dasharray="100, 100"/>
              <defs>
                <linearGradient id="totalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#1D4ED8;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                </linearGradient>
              </defs>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-4xl font-bold text-gray-800 drop-shadow-sm">{{ shareholderStats.total }}</span>
            </div>
          </div>
          <p class="mt-4 text-lg font-medium bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-blue-400 text-center">Actionnaires</p>
        </div>
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gray-800 text-white text-sm rounded-lg px-3 py-1">
          Total: {{ shareholderStats.total }} actionnaires
        </div>
      </div>

      <!-- Tunisian Shareholders -->
      <div class="relative flex flex-col items-center group">
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg p-6 w-64">
          <div class="relative w-48 h-48 mx-auto transition-transform duration-300 group-hover:rotate-3">
            <svg class="w-full h-full" viewBox="0 0 36 36">
              <path class="circle-bg" d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none" stroke="#E5E7EB" stroke-width="2"/>
              <path class="circle circle-animate group-hover:brightness-110" d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none" stroke="url(#tunisianGradient)" stroke-width="2" [attr.stroke-dasharray]="shareholderStats.tunisianPercentage + ', 100'"/>
              <defs>
                <linearGradient id="tunisianGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#10B981;stop-opacity:1" />
                </linearGradient>
              </defs>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-4xl font-bold text-gray-800 drop-shadow-sm">{{ shareholderStats.tunisianPercentage }}%</span>
            </div>
          </div>
          <p class="mt-4 text-lg font-medium bg-clip-text text-transparent bg-gradient-to-r from-green-600 to-green-400 text-center">Tunisien</p>
        </div>
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gray-800 text-white text-sm rounded-lg px-3 py-1">
          Tunisien: {{ shareholderStats.tunisianPercentage }}% ({{ shareholderStats.total * shareholderStats.tunisianPercentage / 100 | number:'1.0-0' }} actionnaires)
        </div>
      </div>

      <!-- Foreign Shareholders -->
      <div class="relative flex flex-col items-center group">
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg p-6 w-64">
          <div class="relative w-48 h-48 mx-auto transition-transform duration-300 group-hover:rotate-3">
            <svg class="w-full h-full" viewBox="0 0 36 36">
              <path class="circle-bg" d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none" stroke="#E5E7EB" stroke-width="2"/>
              <path class="circle circle-animate group-hover:brightness-110" d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none" stroke="url(#foreignGradient)" stroke-width="2" [attr.stroke-dasharray]="shareholderStats.foreignPercentage + ', 100'"/>
              <defs>
                <linearGradient id="foreignGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#DC2626;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#EF4444;stop-opacity:1" />
                </linearGradient>
              </defs>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-4xl font-bold text-gray-800 drop-shadow-sm">{{ shareholderStats.foreignPercentage }}%</span>
            </div>
          </div>
          <p class="mt-4 text-lg font-medium bg-clip-text text-transparent bg-gradient-to-r from-red-600 to-red-400 text-center">Étranger</p>
        </div>
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gray-800 text-white text-sm rounded-lg px-3 py-1">
          Étranger:  {{ shareholderStats.foreignPercentage }}% ({{ shareholderStats.foreignCount }} actionnaires)
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .circle-animate {
    stroke-linecap: round;
    animation: draw 1.5s ease-in-out forwards, bounce 0.5s ease-in-out;
    transform: rotate(-90deg);
    transform-origin: center;
  }

  @keyframes draw {
    from {
      stroke-dashoffset: 100;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  @keyframes bounce {
    0%, 100% {
      transform: rotate(-90deg) scale(1);
    }
    50% {
      transform: rotate(-90deg) scale(1.05);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease-out forwards;
  }

  .drop-shadow-sm {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .group:hover .circle {
    transition: all 0.3s ease;
  }

  .shareholder-stats-section {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
</style>
  


</div>
